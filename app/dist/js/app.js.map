{"version":3,"sources":["webpack:///app/dist/js/app.js","webpack:///webpack/bootstrap 94d12ae9d4555e7dfa62","webpack:///./app/src/js/index.js","webpack:///./app/src/js/shapes/shape.js","webpack:///./app/src/js/gameBoard.js","webpack:///./app/src/js/inputHandler.js","webpack:///./app/src/js/shapeGenerator.js","webpack:///./app/src/js/shapes/iShape.js","webpack:///./app/src/js/shapes/jShape.js","webpack:///./app/src/js/shapes/lShape.js","webpack:///./app/src/js/shapes/oShape.js","webpack:///./app/src/js/shapes/sShape.js","webpack:///./app/src/js/shapes/tShape.js","webpack:///./app/src/js/shapes/zShape.js","webpack:///./app/src/js/stage.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_stage","_stage2","_gameBoard","_gameBoard2","_inputHandler","_inputHandler2","stage","gameBoard","Tetris","config","rowsCount","colsCount","SPEED_TIME","FPS_RATE","init","blockSize","blocksUrl","backgroundUrl","stageReady","handleTick","event","paused","now","Date","previousTime","updateTime","isGameOver","currentShape","canMove","x","y","state","moveDown","attachShape","setNextShape","score","drawShapePreview","nextShape","drawGameBoard","gameData","drawShape","update","onGameOver","speed","initGame","createjs","Ticker","setFPS","addEventListener","showGameOver","window","onload","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","value","Shape","this","_states","_currentState","_color","_x","_y","get","nextState","_shapeGenerator","_shapeGenerator2","GameBoard","rows","cols","_gameData","_currentShape","_nextShape","_score","_isGameOver","_rows","_cols","r","push","getShape","xPos","yPos","newState","result","newX","newY","len","len2","undefined","shape","row","cell","color","_checkLines","fullRow","lineFound","_clearRow","LEFT_ARROW_CODE","RIGHT_ARROW_CODE","UP_ARROW_CODE","DOWN_ARROW_CODE","document","onkeydown","e","preventDefault","keyCode","moveLeft","moveRight","rotate","hideGameOver","_lShape","_lShape2","_jShape","_jShape2","_sShape","_sShape2","_zShape","_zShape2","_tShape","_tShape2","_iShape","_iShape2","_oShape","_oShape2","SHAPES_NUM","L_SHAPE","J_SHAPE","O_SHAPE","I_SHAPE","T_SHAPE","Z_SHAPE","ShapeGenerator","Math","floor","random","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_shape","_shape2","STATE_1","STATE_2","IShape","_Shape","_this","getPrototypeOf","STATE_3","STATE_4","JShape","LShape","OShape","SShape","TShape","ZShape","BLOCKS_NUM","SCORE_TPL","Stage","getElementById","_blockAssets","_blocks","_blocksContainer","Container","_gameInfoContainer","_previewContainer","_scoreLabel","Text","_gameOverScreen","_blockSize","_bgImgPath","_blocksSpritePath","blocksSpritePath","bgImgPath","callback","_loadSpritesheet","_initBlocks","_drawBackground","_drawGameInfo","addChild","_drawGameOverScreen","blockBtmp","Bitmap","SpriteSheetUtils","extractFrame","SpriteSheet","images","frames","width","height","count","regX","regY","spacing","margin","console","error","src","complete","bind","setBounds","bkg","graphics","setStrokeStyle","beginStroke","moveTo","lineTo","previewContainerLabel","set","text","backdrop","canvas","beginFill","drawRect","emptyBlock","clone","currentBlock","curX","curY","j","addChildAt","w","h","alpha","label","_label$getBounds","getBounds","textWidth","textHeight","visible","block","drawX","drawY","removeAllChildren","_gameInfoContainer$ge","giWidth","_previewContainer$get","pWidth","replace","toString"],"mappings":"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","file":"./app/dist/js/app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _stage = __webpack_require__(12);\n\t\n\tvar _stage2 = _interopRequireDefault(_stage);\n\t\n\tvar _gameBoard = __webpack_require__(2);\n\t\n\tvar _gameBoard2 = _interopRequireDefault(_gameBoard);\n\t\n\tvar _inputHandler = __webpack_require__(3);\n\t\n\tvar _inputHandler2 = _interopRequireDefault(_inputHandler);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar stage = new _stage2.default(),\n\t    gameBoard = new _gameBoard2.default(Tetris.config.rowsCount, Tetris.config.colsCount); /**\n\t                                                                                            * Created by kurpav on 1/21/16.\n\t                                                                                            */\n\t\n\tvar SPEED_TIME = 500,\n\t    FPS_RATE = 60;\n\t\n\tTetris.init = function () {\n\t\tstage.init(Tetris.config.rowsCount, Tetris.config.colsCount, Tetris.config.blockSize, Tetris.config.blocksUrl, Tetris.config.backgroundUrl, Tetris.stageReady);\n\t};\n\t\n\tTetris.stageReady = function () {\n\t\tvar previousTime = 0,\n\t\t    updateTime = SPEED_TIME - Tetris.config.speed * 100 + 100;\n\t\n\t\tgameBoard.initGame();\n\t\tstage.drawShapePreview(gameBoard.nextShape);\n\t\n\t\tcreatejs.Ticker.setFPS(FPS_RATE);\n\t\tcreatejs.Ticker.addEventListener(\"tick\", handleTick);\n\t\n\t\tfunction handleTick(event) {\n\t\t\tif (event.paused) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar now = Date.now();\n\t\n\t\t\tif (now - previousTime > updateTime && !gameBoard.isGameOver) {\n\t\t\t\tvar currentShape = gameBoard.currentShape;\n\t\n\t\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y + 1, currentShape.state)) {\n\t\t\t\t\tcurrentShape.moveDown();\n\t\t\t\t} else {\n\t\t\t\t\tgameBoard.attachShape(currentShape);\n\t\t\t\t\tgameBoard.setNextShape();\n\t\t\t\t\tstage.score = gameBoard.score;\n\t\t\t\t\tstage.drawShapePreview(gameBoard.nextShape);\n\t\t\t\t}\n\t\n\t\t\t\tpreviousTime = now;\n\t\t\t}\n\t\n\t\t\tstage.drawGameBoard(gameBoard.gameData);\n\t\t\tstage.drawShape(gameBoard.currentShape);\n\t\n\t\t\tstage.update();\n\t\n\t\t\tif (gameBoard.isGameOver) {\n\t\t\t\tTetris.onGameOver();\n\t\t\t}\n\t\t}\n\t\n\t\t_inputHandler2.default.init(gameBoard, stage);\n\t};\n\t\n\tTetris.onGameOver = function () {\n\t\tstage.showGameOver();\n\t\tstage.update();\n\t\tcreatejs.Ticker.paused = true;\n\t};\n\t\n\twindow.onload = Tetris.init;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by kurpav on 1/23/16.\n\t */\n\t\n\tvar Shape = function () {\n\t\tfunction Shape() {\n\t\t\t_classCallCheck(this, Shape);\n\t\n\t\t\tthis._states = [];\n\t\t\tthis._currentState = 0;\n\t\t\tthis._color = 0;\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t}\n\t\n\t\t_createClass(Shape, [{\n\t\t\tkey: \"moveDown\",\n\t\t\tvalue: function moveDown() {\n\t\t\t\tthis._y += 1;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"moveLeft\",\n\t\t\tvalue: function moveLeft() {\n\t\t\t\tthis._x -= 1;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"moveRight\",\n\t\t\tvalue: function moveRight() {\n\t\t\t\tthis._x += 1;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"rotate\",\n\t\t\tvalue: function rotate() {\n\t\t\t\tthis._currentState -= 1;\n\t\t\t\tif (this._currentState < 0) {\n\t\t\t\t\tthis._currentState = this._states.length - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"nextState\",\n\t\t\tget: function get() {\n\t\t\t\tvar nextState = this._currentState - 1;\n\t\t\t\tif (nextState < 0) {\n\t\t\t\t\tnextState = this._states.length - 1;\n\t\t\t\t}\n\t\t\t\treturn this._states[nextState];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"x\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._x;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"y\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._y;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"color\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._color;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"state\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._states[this._currentState];\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Shape;\n\t}();\n\t\n\texports.default = Shape;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by kurpav on 1/22/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shapeGenerator = __webpack_require__(4);\n\t\n\tvar _shapeGenerator2 = _interopRequireDefault(_shapeGenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GameBoard = function () {\n\t\tfunction GameBoard(rows, cols) {\n\t\t\t_classCallCheck(this, GameBoard);\n\t\n\t\t\tthis._gameData = null;\n\t\t\tthis._currentShape = null;\n\t\t\tthis._nextShape = null;\n\t\t\tthis._shapeGenerator = new _shapeGenerator2.default();\n\t\t\tthis._score = 0;\n\t\t\tthis._isGameOver = false;\n\t\t\tthis._rows = rows;\n\t\t\tthis._cols = cols;\n\t\t}\n\t\n\t\t_createClass(GameBoard, [{\n\t\t\tkey: \"initGame\",\n\t\t\tvalue: function initGame() {\n\t\t\t\tif (this._gameData === null) {\n\t\t\t\t\tthis._gameData = [];\n\t\t\t\t\tfor (var r = 0; r < this._rows; r++) {\n\t\t\t\t\t\tthis._gameData[r] = [];\n\t\t\t\t\t\tfor (var c = 0; c < this._cols; c++) {\n\t\t\t\t\t\t\tthis._gameData[r].push(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (var r = 0; r < this._rows; r++) {\n\t\t\t\t\t\tthis._gameData[r] = [];\n\t\t\t\t\t\tfor (var c = 0; c < this._cols; c++) {\n\t\t\t\t\t\t\tthis._gameData[r][c] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis._isGameOver = false;\n\t\t\t\tthis._currentShape = this._shapeGenerator.getShape();\n\t\t\t\tthis._nextShape = this._shapeGenerator.getShape();\n\t\t\t\tthis._score = 0;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"canMove\",\n\t\t\tvalue: function canMove(xPos, yPos, newState) {\n\t\t\t\tvar result = true,\n\t\t\t\t    newX = xPos,\n\t\t\t\t    newY = yPos;\n\t\n\t\t\t\tfor (var r = 0, len = newState.length; r < len; r++) {\n\t\t\t\t\tfor (var c = 0, len2 = newState[r].length; c < len2; c++) {\n\t\t\t\t\t\t//check move left and right\n\t\t\t\t\t\tif (newX < 0 || newX > this._cols) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t\tr = len;\n\t\t\t\t\t\t\tc = len2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//check move down and rotation\n\t\t\t\t\t\tif (this._gameData[newY] !== undefined && this._gameData[newY][newX] !== 0 && newState[r] !== undefined && newState[r][c] !== 0) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t\tr = len;\n\t\t\t\t\t\t\tc = len2;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tnewX += 1;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tnewX = xPos;\n\t\t\t\t\tnewY += 1;\n\t\n\t\t\t\t\tif (newY > this._rows) {\n\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\tr = len;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"setNextShape\",\n\t\t\tvalue: function setNextShape() {\n\t\t\t\tthis._currentShape = this._nextShape;\n\t\t\t\tthis._nextShape = this._shapeGenerator.getShape();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"attachShape\",\n\t\t\tvalue: function attachShape(shape) {\n\t\t\t\tvar row = null,\n\t\t\t\t    cell = null,\n\t\t\t\t    xPos = shape.x,\n\t\t\t\t    yPos = shape.y;\n\t\n\t\t\t\tfor (var r = 0, len = shape.state.length; r < len; r++) {\n\t\t\t\t\trow = shape.state[r];\n\t\t\t\t\tfor (var c = 0, len2 = row.length; c < len2; c++) {\n\t\t\t\t\t\tcell = row[c];\n\t\t\t\t\t\tif (cell !== 0 && yPos >= 0) {\n\t\t\t\t\t\t\tthis._gameData[yPos][xPos] = shape.color;\n\t\t\t\t\t\t}\n\t\t\t\t\t\txPos += 1;\n\t\t\t\t\t}\n\t\t\t\t\txPos = shape.x;\n\t\t\t\t\tyPos += 1;\n\t\t\t\t}\n\t\n\t\t\t\tthis._checkLines();\n\t\n\t\t\t\tif (shape.y < 0) {\n\t\t\t\t\tthis._isGameOver = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_checkLines\",\n\t\t\tvalue: function _checkLines() {\n\t\t\t\tvar fullRow = true,\n\t\t\t\t    lineFound = false,\n\t\t\t\t    r = this._rows - 1,\n\t\t\t\t    c = this._cols - 1;\n\t\n\t\t\t\twhile (r >= 0) {\n\t\t\t\t\twhile (c >= 0) {\n\t\t\t\t\t\tif (this._gameData[r][c] === 0) {\n\t\t\t\t\t\t\tfullRow = false;\n\t\t\t\t\t\t\tc = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc--;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (fullRow) {\n\t\t\t\t\t\tthis._clearRow(r);\n\t\t\t\t\t\tr++;\n\t\t\t\t\t\tlineFound = true;\n\t\t\t\t\t\tthis._score += 10;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tfullRow = true;\n\t\t\t\t\tc = this._cols - 1;\n\t\t\t\t\tr--;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_clearRow\",\n\t\t\tvalue: function _clearRow(row) {\n\t\t\t\tvar r = row,\n\t\t\t\t    c = 0;\n\t\n\t\t\t\twhile (r >= 0) {\n\t\t\t\t\twhile (c < this._cols) {\n\t\t\t\t\t\tif (r > 0) {\n\t\t\t\t\t\t\tthis._gameData[r][c] = this._gameData[r - 1][c];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._gameData[r][c] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc++;\n\t\t\t\t\t}\n\t\t\t\t\tc = 0;\n\t\t\t\t\tr--;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"gameData\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._gameData;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"currentShape\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._currentShape;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"isGameOver\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._isGameOver;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"score\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._score;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"nextShape\",\n\t\t\tget: function get() {\n\t\t\t\treturn this._nextShape;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn GameBoard;\n\t}();\n\t\n\texports.default = GameBoard;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Created by kurpav on 1/24/16.\n\t */\n\tvar LEFT_ARROW_CODE = 37,\n\t    RIGHT_ARROW_CODE = 39,\n\t    UP_ARROW_CODE = 38,\n\t    DOWN_ARROW_CODE = 40;\n\t\n\tvar init = function init(gameBoard, stage) {\n\t\tdocument.onkeydown = function (e) {\n\t\t\tif (!e) {\n\t\t\t\te = window.event;\n\t\t\t}\n\t\n\t\t\te.preventDefault();\n\t\n\t\t\tvar currentShape = gameBoard.currentShape;\n\t\n\t\t\tif (gameBoard.isGameOver !== true) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase LEFT_ARROW_CODE:\n\t\t\t\t\t\tif (gameBoard.canMove(currentShape.x - 1, currentShape.y, currentShape.state)) {\n\t\t\t\t\t\t\tcurrentShape.moveLeft();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase RIGHT_ARROW_CODE:\n\t\t\t\t\t\tif (gameBoard.canMove(currentShape.x + 1, currentShape.y, currentShape.state)) {\n\t\t\t\t\t\t\tcurrentShape.moveRight();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase UP_ARROW_CODE:\n\t\t\t\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y, currentShape.nextState)) {\n\t\t\t\t\t\t\tcurrentShape.rotate();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase DOWN_ARROW_CODE:\n\t\t\t\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y + 1, currentShape.state)) {\n\t\t\t\t\t\t\tcurrentShape.moveDown();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgameBoard.initGame();\n\t\t\t\tstage.score = gameBoard.score;\n\t\t\t\tstage.drawShapePreview(gameBoard.nextShape);\n\t\t\t\tstage.hideGameOver();\n\t\t\t\tcreatejs.Ticker.paused = false;\n\t\t\t}\n\t\t};\n\t};\n\t\n\tmodule.exports = {\n\t\tinit: init\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _lShape = __webpack_require__(7);\n\t\n\tvar _lShape2 = _interopRequireDefault(_lShape);\n\t\n\tvar _jShape = __webpack_require__(6);\n\t\n\tvar _jShape2 = _interopRequireDefault(_jShape);\n\t\n\tvar _sShape = __webpack_require__(9);\n\t\n\tvar _sShape2 = _interopRequireDefault(_sShape);\n\t\n\tvar _zShape = __webpack_require__(11);\n\t\n\tvar _zShape2 = _interopRequireDefault(_zShape);\n\t\n\tvar _tShape = __webpack_require__(10);\n\t\n\tvar _tShape2 = _interopRequireDefault(_tShape);\n\t\n\tvar _iShape = __webpack_require__(5);\n\t\n\tvar _iShape2 = _interopRequireDefault(_iShape);\n\t\n\tvar _oShape = __webpack_require__(8);\n\t\n\tvar _oShape2 = _interopRequireDefault(_oShape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar instance = null;\n\tvar SHAPES_NUM = 7;\n\tvar L_SHAPE = 0;\n\tvar J_SHAPE = 1;\n\tvar O_SHAPE = 2;\n\tvar I_SHAPE = 3;\n\tvar T_SHAPE = 4;\n\tvar Z_SHAPE = 5;\n\t\n\t//Singleton class\n\t\n\tvar ShapeGenerator = function () {\n\t\tfunction ShapeGenerator() {\n\t\t\t_classCallCheck(this, ShapeGenerator);\n\t\n\t\t\tif (!instance) {\n\t\t\t\tinstance = this;\n\t\t\t}\n\t\n\t\t\treturn instance;\n\t\t}\n\t\n\t\t_createClass(ShapeGenerator, [{\n\t\t\tkey: \"getShape\",\n\t\t\tvalue: function getShape() {\n\t\t\t\tvar result = new _sShape2.default();\n\t\t\t\tvar shape = Math.floor(Math.random() * SHAPES_NUM);\n\t\n\t\t\t\tswitch (shape) {\n\t\t\t\t\tcase L_SHAPE:\n\t\t\t\t\t\tresult = new _lShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase J_SHAPE:\n\t\t\t\t\t\tresult = new _jShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase O_SHAPE:\n\t\t\t\t\t\tresult = new _oShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase I_SHAPE:\n\t\t\t\t\t\tresult = new _iShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase T_SHAPE:\n\t\t\t\t\t\tresult = new _tShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Z_SHAPE:\n\t\t\t\t\t\tresult = new _zShape2.default();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn ShapeGenerator;\n\t}();\n\t\n\texports.default = ShapeGenerator;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[1], [1], [1], [1]];\n\tvar STATE_2 = [[1, 1, 1, 1]];\n\t\n\tvar IShape = function (_Shape) {\n\t\t_inherits(IShape, _Shape);\n\t\n\t\tfunction IShape() {\n\t\t\t_classCallCheck(this, IShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(IShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 2;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn IShape;\n\t}(_shape2.default);\n\t\n\texports.default = IShape;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[0, 1], [0, 1], [1, 1]];\n\tvar STATE_2 = [[1, 1, 1], [0, 0, 1]];\n\tvar STATE_3 = [[1, 1], [1, 0], [1, 0]];\n\tvar STATE_4 = [[1, 0, 0], [1, 1, 1]];\n\t\n\tvar JShape = function (_Shape) {\n\t\t_inherits(JShape, _Shape);\n\t\n\t\tfunction JShape() {\n\t\t\t_classCallCheck(this, JShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(JShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 1;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn JShape;\n\t}(_shape2.default);\n\t\n\texports.default = JShape;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[1, 0], [1, 0], [1, 1]];\n\tvar STATE_2 = [[0, 0, 1], [1, 1, 1]];\n\tvar STATE_3 = [[1, 1], [0, 1], [0, 1]];\n\tvar STATE_4 = [[1, 1, 1], [1, 0, 0]];\n\t\n\tvar LShape = function (_Shape) {\n\t\t_inherits(LShape, _Shape);\n\t\n\t\tfunction LShape() {\n\t\t\t_classCallCheck(this, LShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 4;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn LShape;\n\t}(_shape2.default);\n\t\n\texports.default = LShape;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[1, 1], [1, 1]];\n\t\n\tvar OShape = function (_Shape) {\n\t\t_inherits(OShape, _Shape);\n\t\n\t\tfunction OShape() {\n\t\t\t_classCallCheck(this, OShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(OShape).call(this));\n\t\n\t\t\t_this._currentState = 0;\n\t\t\t_this._states = [STATE_1];\n\t\t\t_this._color = 7;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -2;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn OShape;\n\t}(_shape2.default);\n\t\n\texports.default = OShape;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[0, 1, 1], [1, 1, 0]];\n\tvar STATE_2 = [[1, 0], [1, 1], [0, 1]];\n\t\n\tvar SShape = function (_Shape) {\n\t\t_inherits(SShape, _Shape);\n\t\n\t\tfunction SShape() {\n\t\t\t_classCallCheck(this, SShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 3;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn SShape;\n\t}(_shape2.default);\n\t\n\texports.default = SShape;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[1, 1, 1], [0, 1, 0]];\n\tvar STATE_2 = [[1, 0], [1, 1], [1, 0]];\n\tvar STATE_3 = [[0, 1, 0], [1, 1, 1]];\n\tvar STATE_4 = [[0, 1], [1, 1], [0, 1]];\n\t\n\tvar TShape = function (_Shape) {\n\t\t_inherits(TShape, _Shape);\n\t\n\t\tfunction TShape() {\n\t\t\t_classCallCheck(this, TShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(TShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 5;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn TShape;\n\t}(_shape2.default);\n\t\n\texports.default = TShape;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _shape = __webpack_require__(1);\n\t\n\tvar _shape2 = _interopRequireDefault(_shape);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by kurpav on 1/21/16.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar STATE_1 = [[1, 1, 0], [0, 1, 1]];\n\tvar STATE_2 = [[0, 1], [1, 1], [1, 0]];\n\t\n\tvar ZShape = function (_Shape) {\n\t\t_inherits(ZShape, _Shape);\n\t\n\t\tfunction ZShape() {\n\t\t\t_classCallCheck(this, ZShape);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ZShape).call(this));\n\t\n\t\t\t_this._states = [STATE_1, STATE_2];\n\t\t\t_this._currentState = Math.floor(Math.random() * _this._states.length);\n\t\t\t_this._color = 6;\n\t\t\t_this._x = 4;\n\t\t\t_this._y = -1 * _this._states[_this._currentState].length;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn ZShape;\n\t}(_shape2.default);\n\t\n\texports.default = ZShape;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * Created by kurpav on 1/22/16.\n\t */\n\tvar BLOCKS_NUM = 8,\n\t    SCORE_TPL = \"Score: {0}\";\n\t\n\tvar Stage = function () {\n\t\tfunction Stage() {\n\t\t\t_classCallCheck(this, Stage);\n\t\n\t\t\tthis._stage = new createjs.Stage(document.getElementById(\"game-stage\"));\n\t\t\tthis._blockAssets = null;\n\t\t\tthis._blocks = [];\n\t\t\tthis._blocksContainer = new createjs.Container();\n\t\t\tthis._gameInfoContainer = new createjs.Container();\n\t\t\tthis._previewContainer = new createjs.Container();\n\t\t\tthis._scoreLabel = new createjs.Text(\"\", \"20px Arial\", \"white\");\n\t\t\tthis._gameOverScreen = new createjs.Container();\n\t\t\tthis._rows = 0;\n\t\t\tthis._cols = 0;\n\t\t\tthis._blockSize = 0;\n\t\t\tthis._bgImgPath = \"\";\n\t\t\tthis._blocksSpritePath = \"\";\n\t\t}\n\t\n\t\t_createClass(Stage, [{\n\t\t\tkey: \"init\",\n\t\t\tvalue: function init(rows, cols, blockSize, blocksSpritePath, bgImgPath, callback) {\n\t\t\t\tthis._bgImgPath = bgImgPath;\n\t\t\t\tthis._blocksSpritePath = blocksSpritePath;\n\t\t\t\tthis._blockSize = blockSize;\n\t\t\t\tthis._rows = rows;\n\t\t\t\tthis._cols = cols;\n\t\n\t\t\t\tthis._loadSpritesheet(function () {\n\t\t\t\t\tthis._initBlocks();\n\t\t\t\t\tthis._drawBackground();\n\t\t\t\t\tthis._drawGameInfo();\n\t\t\t\t\tthis._stage.addChild(this._blocksContainer);\n\t\t\t\t\tthis._drawGameOverScreen();\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_initBlocks\",\n\t\t\tvalue: function _initBlocks() {\n\t\t\t\tvar blockBtmp = null;\n\t\t\t\tfor (var i = 0; i < BLOCKS_NUM; i++) {\n\t\t\t\t\tblockBtmp = new createjs.Bitmap(createjs.SpriteSheetUtils.extractFrame(this._blockAssets, i));\n\t\t\t\t\tthis._blocks.push(blockBtmp);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_loadSpritesheet\",\n\t\t\tvalue: function _loadSpritesheet(callback) {\n\t\t\t\tthis._blockAssets = new createjs.SpriteSheet({\n\t\t\t\t\timages: [this._blocksSpritePath],\n\t\t\t\t\tframes: {\n\t\t\t\t\t\twidth: this._blockSize,\n\t\t\t\t\t\theight: this._blockSize,\n\t\t\t\t\t\tcount: BLOCKS_NUM,\n\t\t\t\t\t\tregX: 0,\n\t\t\t\t\t\tregY: 0,\n\t\t\t\t\t\tspacing: 0,\n\t\t\t\t\t\tmargin: 0\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tthis._blockAssets.addEventListener(\"error\", function (e) {\n\t\t\t\t\tconsole.error(\"Blocks spritesheet isn't found in \" + e.src);\n\t\t\t\t});\n\t\n\t\t\t\tif (!this._blockAssets.complete) {\n\t\t\t\t\t// not preloaded, listen for the complete event:\n\t\t\t\t\tthis._blockAssets.addEventListener(\"complete\", callback.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_drawGameInfo\",\n\t\t\tvalue: function _drawGameInfo() {\n\t\t\t\tthis._gameInfoContainer.setBounds(0, 0, 180, 640);\n\t\t\t\tthis._gameInfoContainer.x = 320;\n\t\t\t\tthis._stage.addChild(this._gameInfoContainer);\n\t\n\t\t\t\tvar bkg = new createjs.Shape();\n\t\t\t\tbkg.setBounds(0, 0, 180, 640);\n\t\t\t\tbkg.graphics.setStrokeStyle(1).beginStroke(\"#ffffff\").moveTo(1, 0).lineTo(1, 640);\n\t\t\t\tthis._gameInfoContainer.addChild(bkg);\n\t\n\t\t\t\tvar previewContainerLabel = new createjs.Text(\"Next shape:\", \"20px Arial\", \"white\");\n\t\t\t\tpreviewContainerLabel.set({ x: 25, y: 65 });\n\t\t\t\tthis._gameInfoContainer.addChild(previewContainerLabel);\n\t\n\t\t\t\tthis._scoreLabel.text = \"Score: 0\";\n\t\t\t\tthis._scoreLabel.set({ x: 25, y: 30 });\n\t\t\t\tthis._gameInfoContainer.addChild(this._scoreLabel);\n\t\n\t\t\t\tthis._previewContainer.set({ x: 25, y: 115 });\n\t\t\t\tthis._gameInfoContainer.addChild(this._previewContainer);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_drawBackground\",\n\t\t\tvalue: function _drawBackground() {\n\t\t\t\tvar bkg = null,\n\t\t\t\t    backdrop = new createjs.Shape();\n\t\n\t\t\t\tbackdrop.setBounds(0, 0, this._stage.canvas.width, this._stage.canvas.height);\n\t\t\t\tbackdrop.graphics.beginFill(\"0x000000\").drawRect(0, 0, this._stage.canvas.width, this._stage.canvas.height);\n\t\n\t\t\t\tif (this._bgImgPath !== \"\") {\n\t\t\t\t\tbkg = new createjs.Bitmap(this._bgImgPath);\n\t\t\t\t} else {\n\t\t\t\t\tbkg = new createjs.Container();\n\t\n\t\t\t\t\tvar emptyBlock = this._blocks[0].clone(),\n\t\t\t\t\t    currentBlock = null,\n\t\t\t\t\t    curX = 0,\n\t\t\t\t\t    curY = 0;\n\t\n\t\t\t\t\tfor (var i = 0; i < this._rows; i++) {\n\t\t\t\t\t\tfor (var j = 0; j < this._cols; j++) {\n\t\t\t\t\t\t\tcurrentBlock = emptyBlock.clone();\n\t\t\t\t\t\t\tcurrentBlock.x = curX;\n\t\t\t\t\t\t\tcurrentBlock.y = curY;\n\t\t\t\t\t\t\tbkg.addChild(currentBlock);\n\t\n\t\t\t\t\t\t\tcurX += this._blockSize;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurX = 0;\n\t\t\t\t\t\tcurY += this._blockSize;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis._stage.addChildAt(backdrop, 0);\n\t\t\t\tthis._stage.addChild(bkg);\n\t\t\t\tthis._stage.update();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"_drawGameOverScreen\",\n\t\t\tvalue: function _drawGameOverScreen() {\n\t\t\t\tvar w = this._stage.canvas.width,\n\t\t\t\t    h = this._stage.canvas.height;\n\t\n\t\t\t\tthis._gameOverScreen.setBounds(0, 0, w, h);\n\t\n\t\t\t\tvar backdrop = new createjs.Shape();\n\t\t\t\tbackdrop.setBounds(0, 0, w, h);\n\t\t\t\tbackdrop.graphics.beginFill(\"0x000000\").drawRect(0, 0, w, h);\n\t\t\t\tbackdrop.alpha = 0.5;\n\t\n\t\t\t\tthis._gameOverScreen.addChild(backdrop);\n\t\n\t\t\t\tvar label = new createjs.Text(\"GAME OVER\", \"48px Arial\", \"white\");\n\t\n\t\t\t\tvar _label$getBounds = label.getBounds();\n\t\n\t\t\t\tvar textWidth = _label$getBounds.width;\n\t\t\t\tvar textHeight = _label$getBounds.height;\n\t\n\t\t\t\tlabel.set({ x: w / 2 - textWidth / 2, y: h / 2 - textHeight / 2 });\n\t\n\t\t\t\tthis._gameOverScreen.addChild(label);\n\t\t\t\tthis._gameOverScreen.visible = false;\n\t\t\t\tthis._stage.addChild(this._gameOverScreen);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"showGameOver\",\n\t\t\tvalue: function showGameOver() {\n\t\t\t\tthis._gameOverScreen.visible = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"hideGameOver\",\n\t\t\tvalue: function hideGameOver() {\n\t\t\t\tthis._gameOverScreen.visible = false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"drawShape\",\n\t\t\tvalue: function drawShape(shape) {\n\t\t\t\tvar row = null,\n\t\t\t\t    cell = null,\n\t\t\t\t    block = null,\n\t\t\t\t    drawX = shape.x,\n\t\t\t\t    drawY = shape.y;\n\t\n\t\t\t\tfor (var i = 0, len = shape.state.length; i < len; i++) {\n\t\t\t\t\trow = shape.state[i];\n\t\t\t\t\tfor (var j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\t\t\tcell = row[j];\n\t\t\t\t\t\tif (cell !== 0 && drawY >= 0) {\n\t\t\t\t\t\t\tblock = this._blocks[shape.color].clone();\n\t\t\t\t\t\t\tblock.x = drawX * this._blockSize;\n\t\t\t\t\t\t\tblock.y = drawY * this._blockSize;\n\t\t\t\t\t\t\tthis._blocksContainer.addChild(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdrawX += 1;\n\t\t\t\t\t}\n\t\t\t\t\tdrawX = shape.x;\n\t\t\t\t\tdrawY += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"drawGameBoard\",\n\t\t\tvalue: function drawGameBoard(gameData) {\n\t\t\t\tvar row = null,\n\t\t\t\t    cell = null,\n\t\t\t\t    block = null;\n\t\n\t\t\t\tthis._blocksContainer.removeAllChildren();\n\t\n\t\t\t\tfor (var i = 0, len = gameData.length; i < len; i++) {\n\t\t\t\t\trow = gameData[i];\n\t\t\t\t\tfor (var j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\t\t\tcell = row[j];\n\t\t\t\t\t\tif (cell !== 0) {\n\t\t\t\t\t\t\tblock = this._blocks[cell].clone();\n\t\t\t\t\t\t\tblock.x = j * this._blockSize;\n\t\t\t\t\t\t\tblock.y = i * this._blockSize;\n\t\t\t\t\t\t\tthis._blocksContainer.addChild(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"drawShapePreview\",\n\t\t\tvalue: function drawShapePreview(shape) {\n\t\t\t\tvar row = null,\n\t\t\t\t    cell = null,\n\t\t\t\t    block = null,\n\t\t\t\t    drawX = 0,\n\t\t\t\t    drawY = 0;\n\t\n\t\t\t\tthis._previewContainer.removeAllChildren();\n\t\n\t\t\t\tfor (var i = 0, len = shape.state.length; i < len; i++) {\n\t\t\t\t\trow = shape.state[i];\n\t\t\t\t\tfor (var j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\t\t\tcell = row[j];\n\t\t\t\t\t\tif (cell !== 0 && drawY >= 0) {\n\t\t\t\t\t\t\tblock = this._blocks[shape.color].clone();\n\t\t\t\t\t\t\tblock.x = drawX * this._blockSize;\n\t\t\t\t\t\t\tblock.y = drawY * this._blockSize;\n\t\t\t\t\t\t\tthis._previewContainer.addChild(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdrawX += 1;\n\t\t\t\t\t}\n\t\t\t\t\tdrawX = 0;\n\t\t\t\t\tdrawY += 1;\n\t\t\t\t}\n\t\n\t\t\t\tvar _gameInfoContainer$ge = this._gameInfoContainer.getBounds();\n\t\n\t\t\t\tvar giWidth = _gameInfoContainer$ge.width;\n\t\n\t\t\t\tvar _previewContainer$get = this._previewContainer.getBounds();\n\t\n\t\t\t\tvar pWidth = _previewContainer$get.width;\n\t\n\t\t\t\tthis._previewContainer.x = giWidth / 2 - pWidth / 2;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"update\",\n\t\t\tvalue: function update() {\n\t\t\t\tthis._stage.update();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"score\",\n\t\t\tset: function set(score) {\n\t\t\t\tthis._scoreLabel.text = SCORE_TPL.replace(\"{0}\", score.toString());\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Stage;\n\t}();\n\t\n\texports.default = Stage;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** app/dist/js/app.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 94d12ae9d4555e7dfa62\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Stage from \"./stage\";\nimport GameBoard from \"./gameBoard\";\nimport InputHandler from \"./inputHandler\";\n\nlet stage = new Stage(),\n\tgameBoard = new GameBoard(Tetris.config.rowsCount, Tetris.config.colsCount);\n\nconst SPEED_TIME = 500,\n\tFPS_RATE = 60;\n\n\nTetris.init = function () {\n\tstage.init(Tetris.config.rowsCount, Tetris.config.colsCount,\n\t\t\tTetris.config.blockSize, Tetris.config.blocksUrl,\n\t\t\tTetris.config.backgroundUrl, Tetris.stageReady);\n};\n\nTetris.stageReady = function () {\n\tlet previousTime = 0,\n\t\tupdateTime = SPEED_TIME - Tetris.config.speed * 100 + 100;\n\n\tgameBoard.initGame();\n\tstage.drawShapePreview(gameBoard.nextShape);\n\n\tcreatejs.Ticker.setFPS(FPS_RATE);\n\tcreatejs.Ticker.addEventListener(\"tick\", handleTick);\n\n\tfunction handleTick(event) {\n\t\tif(event.paused) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet now = Date.now();\n\n\t\tif (now - previousTime > updateTime && !gameBoard.isGameOver) {\n\t\t\tlet currentShape = gameBoard.currentShape;\n\n\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y + 1, currentShape.state)) {\n\t\t\t\tcurrentShape.moveDown();\n\t\t\t} else {\n\t\t\t\tgameBoard.attachShape(currentShape);\n\t\t\t\tgameBoard.setNextShape();\n\t\t\t\tstage.score = gameBoard.score;\n\t\t\t\tstage.drawShapePreview(gameBoard.nextShape);\n\n\t\t\t}\n\n\t\t\tpreviousTime = now;\n\t\t}\n\n\t\tstage.drawGameBoard(gameBoard.gameData);\n\t\tstage.drawShape(gameBoard.currentShape);\n\n\t\tstage.update();\n\n\t\tif(gameBoard.isGameOver) {\n\t\t\tTetris.onGameOver();\n\t\t}\n\t}\n\n\tInputHandler.init(gameBoard, stage);\n};\n\nTetris.onGameOver = function () {\n\tstage.showGameOver();\n\tstage.update();\n\tcreatejs.Ticker.paused = true;\n};\n\nwindow.onload = Tetris.init;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/index.js\n **/","/**\n * Created by kurpav on 1/23/16.\n */\nclass Shape {\n\tconstructor(){\n\t\tthis._states = [];\n\t\tthis._currentState = 0;\n\t\tthis._color = 0;\n\t\tthis._x = 0;\n\t\tthis._y = 0;\n\t}\n\n\tmoveDown(){\n\t\tthis._y += 1;\n\t}\n\n\tmoveLeft(){\n\t\tthis._x -= 1;\n\t}\n\n\tmoveRight() {\n\t\tthis._x += 1;\n\t}\n\n\trotate() {\n\t\tthis._currentState -= 1;\n\t\tif(this._currentState < 0) {\n\t\t\tthis._currentState = this._states.length - 1;\n\t\t}\n\t}\n\n\tget nextState() {\n\t\tlet nextState = this._currentState - 1;\n\t\tif(nextState < 0) {\n\t\t\tnextState = this._states.length - 1;\n\t\t}\n\t\treturn this._states[nextState];\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tget state() {\n\t\treturn this._states[this._currentState];\n\t}\n}\n\nexport default Shape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/shape.js\n **/","/**\n * Created by kurpav on 1/22/16.\n */\nimport ShapeGenerator from \"./shapeGenerator\";\n\nclass GameBoard {\n\tconstructor(rows, cols) {\n\t\tthis._gameData = null;\n\t\tthis._currentShape = null;\n\t\tthis._nextShape = null;\n\t\tthis._shapeGenerator = new ShapeGenerator();\n\t\tthis._score = 0;\n\t\tthis._isGameOver = false;\n\t\tthis._rows = rows;\n\t\tthis._cols = cols;\n\t}\n\n\tinitGame() {\n\t\tif (this._gameData === null) {\n\t\t\tthis._gameData = [];\n\t\t\tfor (let r = 0; r < this._rows; r++) {\n\t\t\t\tthis._gameData[r] = [];\n\t\t\t\tfor (let c = 0; c < this._cols; c++) {\n\t\t\t\t\tthis._gameData[r].push(0);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let r = 0; r < this._rows; r++) {\n\t\t\t\tthis._gameData[r] = [];\n\t\t\t\tfor (let c = 0; c < this._cols; c++) {\n\t\t\t\t\tthis._gameData[r][c] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._isGameOver = false;\n\t\tthis._currentShape = this._shapeGenerator.getShape();\n\t\tthis._nextShape = this._shapeGenerator.getShape();\n\t\tthis._score = 0;\n\t}\n\n\tcanMove(xPos, yPos, newState) {\n\t\tlet result = true,\n\t\t\tnewX = xPos,\n\t\t\tnewY = yPos;\n\n\t\tfor (let r = 0, len = newState.length; r < len; r++) {\n\t\t\tfor (let c = 0, len2 = newState[r].length; c < len2; c++) {\n\t\t\t\t//check move left and right\n\t\t\t\tif (newX < 0 || newX > this._cols) {\n\t\t\t\t\tresult = false;\n\t\t\t\t\tr = len;\n\t\t\t\t\tc = len2;\n\t\t\t\t}\n\t\t\t\t//check move down and rotation\n\t\t\t\tif (this._gameData[newY] !== undefined && this._gameData[newY][newX] !== 0\n\t\t\t\t\t&& newState[r] !== undefined && newState[r][c] !== 0) {\n\t\t\t\t\tresult = false;\n\t\t\t\t\tr = len;\n\t\t\t\t\tc = len2;\n\t\t\t\t}\n\n\t\t\t\tnewX += 1;\n\t\t\t}\n\n\t\t\tnewX = xPos;\n\t\t\tnewY += 1;\n\n\t\t\tif (newY > this._rows) {\n\t\t\t\tresult = false;\n\t\t\t\tr = len;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsetNextShape() {\n\t\tthis._currentShape = this._nextShape;\n\t\tthis._nextShape = this._shapeGenerator.getShape();\n\t}\n\n\tattachShape(shape) {\n\t\tlet row = null,\n\t\t\tcell = null,\n\t\t\txPos = shape.x,\n\t\t\tyPos = shape.y;\n\n\t\tfor (let r = 0, len = shape.state.length; r < len; r++) {\n\t\t\trow = shape.state[r];\n\t\t\tfor (let c = 0, len2 = row.length; c < len2; c++) {\n\t\t\t\tcell = row[c];\n\t\t\t\tif (cell !== 0 && yPos >= 0) {\n\t\t\t\t\tthis._gameData[yPos][xPos] = shape.color;\n\t\t\t\t}\n\t\t\t\txPos += 1;\n\t\t\t}\n\t\t\txPos = shape.x;\n\t\t\tyPos += 1;\n\t\t}\n\n\t\tthis._checkLines();\n\n\t\tif (shape.y < 0) {\n\t\t\tthis._isGameOver = true;\n\t\t}\n\t}\n\n\t_checkLines() {\n\t\tlet fullRow = true,\n\t\t\tlineFound = false,\n\t\t\tr = this._rows - 1,\n\t\t\tc = this._cols - 1;\n\n\t\twhile (r >= 0) {\n\t\t\twhile (c >= 0) {\n\t\t\t\tif (this._gameData[r][c] === 0) {\n\t\t\t\t\tfullRow = false;\n\t\t\t\t\tc = -1;\n\t\t\t\t}\n\t\t\t\tc--;\n\t\t\t}\n\n\t\t\tif (fullRow) {\n\t\t\t\tthis._clearRow(r);\n\t\t\t\tr++;\n\t\t\t\tlineFound = true;\n\t\t\t\tthis._score += 10;\n\t\t\t}\n\n\t\t\tfullRow = true;\n\t\t\tc = this._cols - 1;\n\t\t\tr--;\n\t\t}\n\t}\n\n\t_clearRow(row) {\n\t\tlet r = row,\n\t\t\tc = 0;\n\n\t\twhile (r >= 0) {\n\t\t\twhile (c < this._cols) {\n\t\t\t\tif (r > 0) {\n\t\t\t\t\tthis._gameData[r][c] = this._gameData[r - 1][c];\n\t\t\t\t} else {\n\t\t\t\t\tthis._gameData[r][c] = 0;\n\t\t\t\t}\n\t\t\t\tc++;\n\t\t\t}\n\t\t\tc = 0;\n\t\t\tr--;\n\t\t}\n\t}\n\n\tget gameData() {\n\t\treturn this._gameData;\n\t}\n\n\tget currentShape() {\n\t\treturn this._currentShape;\n\t}\n\n\tget isGameOver() {\n\t\treturn this._isGameOver;\n\t}\n\n\tget score() {\n\t\treturn this._score;\n\t}\n\n\tget nextShape() {\n\t\treturn this._nextShape;\n\t}\n}\n\nexport default GameBoard;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/gameBoard.js\n **/","/**\n * Created by kurpav on 1/24/16.\n */\nconst LEFT_ARROW_CODE = 37,\n\tRIGHT_ARROW_CODE = 39,\n\tUP_ARROW_CODE = 38,\n\tDOWN_ARROW_CODE = 40;\n\nlet init = function (gameBoard, stage) {\n\tdocument.onkeydown = function (e) {\n\t\tif (!e) {\n\t\t\te = window.event;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tlet currentShape = gameBoard.currentShape;\n\n\t\tif (gameBoard.isGameOver !== true) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase LEFT_ARROW_CODE:\n\t\t\t\t\tif (gameBoard.canMove(currentShape.x - 1, currentShape.y, currentShape.state)) {\n\t\t\t\t\t\tcurrentShape.moveLeft();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase RIGHT_ARROW_CODE:\n\t\t\t\t\tif (gameBoard.canMove(currentShape.x + 1, currentShape.y, currentShape.state)) {\n\t\t\t\t\t\tcurrentShape.moveRight();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase UP_ARROW_CODE:\n\t\t\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y, currentShape.nextState)) {\n\t\t\t\t\t\tcurrentShape.rotate();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase DOWN_ARROW_CODE:\n\t\t\t\t\tif (gameBoard.canMove(currentShape.x, currentShape.y + 1, currentShape.state)) {\n\t\t\t\t\t\tcurrentShape.moveDown()\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgameBoard.initGame();\n\t\t\tstage.score = gameBoard.score;\n\t\t\tstage.drawShapePreview(gameBoard.nextShape);\n\t\t\tstage.hideGameOver();\n\t\t\tcreatejs.Ticker.paused = false;\n\t\t}\n\t}\n};\n\nmodule.exports = {\n\tinit: init\n};\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/inputHandler.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport LShape from \"./shapes/lShape\";\nimport JShape from \"./shapes/jShape\";\nimport SShape from \"./shapes/sShape\";\nimport ZShape from \"./shapes/zShape\";\nimport TShape from \"./shapes/tShape\";\nimport IShape from \"./shapes/iShape\";\nimport OShape from \"./shapes/oShape\";\n\nlet instance = null;\nconst SHAPES_NUM = 7;\nconst L_SHAPE = 0;\nconst J_SHAPE = 1;\nconst O_SHAPE = 2;\nconst I_SHAPE = 3;\nconst T_SHAPE = 4;\nconst Z_SHAPE = 5;\n\n//Singleton class\nclass ShapeGenerator{\n\tconstructor() {\n\t\tif(!instance){\n\t\t\tinstance = this;\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tgetShape() {\n\t\tlet result = new SShape();\n\t\tlet shape = Math.floor(Math.random() * SHAPES_NUM);\n\n\t\tswitch (shape) {\n\t\t\tcase L_SHAPE:\n\t\t\t\tresult = new LShape();\n\t\t\t\tbreak;\n\t\t\tcase J_SHAPE:\n\t\t\t\tresult = new JShape();\n\t\t\t\tbreak;\n\t\t\tcase O_SHAPE:\n\t\t\t\tresult = new OShape();\n\t\t\t\tbreak;\n\t\t\tcase I_SHAPE:\n\t\t\t\tresult = new IShape();\n\t\t\t\tbreak;\n\t\t\tcase T_SHAPE:\n\t\t\t\tresult = new TShape();\n\t\t\t\tbreak;\n\t\t\tcase Z_SHAPE:\n\t\t\t\tresult = new ZShape();\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport default ShapeGenerator;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapeGenerator.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\nconst STATE_1 = [\n\t[1],\n\t[1],\n\t[1],\n\t[1]\n];\nconst STATE_2 = [\n\t[1, 1, 1, 1]\n];\n\nclass IShape extends Shape{\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 2;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default IShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/iShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\nconst STATE_1 = [\n\t[0, 1],\n\t[0, 1],\n\t[1, 1]\n];\nconst STATE_2 = [\n\t[1, 1, 1],\n\t[0, 0, 1]\n];\nconst STATE_3 = [\n\t[1, 1],\n\t[1, 0],\n\t[1, 0]\n];\nconst STATE_4 = [\n\t[1, 0, 0],\n\t[1, 1, 1]\n];\n\nclass JShape extends Shape {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 1;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default JShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/jShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\n\nconst STATE_1 = [\n\t[1, 0],\n\t[1, 0],\n\t[1, 1]\n];\nconst STATE_2 = [\n\t[0, 0, 1],\n\t[1, 1, 1]\n];\nconst STATE_3 = [\n\t[1, 1],\n\t[0, 1],\n\t[0, 1]\n];\nconst STATE_4 = [\n\t[1, 1, 1],\n\t[1, 0, 0]\n];\n\nclass LShape extends Shape {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 4;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default LShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/lShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\nconst STATE_1 = [\n\t[1, 1],\n\t[1, 1]\n];\n\nclass OShape extends Shape {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._currentState = 0;\n\t\tthis._states = [STATE_1];\n\t\tthis._color = 7;\n\t\tthis._x = 4;\n\t\tthis._y = -2;\n\t}\n}\nexport default OShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/oShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\nconst STATE_1 = [\n\t[0, 1, 1],\n\t[1, 1, 0]\n];\nconst STATE_2 = [\n\t[1, 0],\n\t[1, 1],\n\t[0, 1]\n];\n\nclass SShape extends Shape {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 3;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default SShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/sShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\nconst STATE_1 = [\n\t[1, 1, 1],\n\t[0, 1, 0]\n];\nconst STATE_2 = [\n\t[1, 0],\n\t[1, 1],\n\t[1, 0]\n];\nconst STATE_3 = [\n\t[0, 1, 0],\n\t[1, 1, 1]\n];\nconst STATE_4 = [\n\t[0, 1],\n\t[1, 1],\n\t[0, 1]\n];\n\nclass TShape extends Shape {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2, STATE_3, STATE_4];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 5;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default TShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/tShape.js\n **/","/**\n * Created by kurpav on 1/21/16.\n */\nimport Shape from \"./shape\";\n\n\nconst STATE_1 = [\n\t[1, 1, 0],\n\t[0, 1, 1]\n];\nconst STATE_2 = [\n\t[0, 1],\n\t[1, 1],\n\t[1, 0]\n];\n\nclass ZShape extends Shape{\n\tconstructor() {\n\t\tsuper();\n\t\tthis._states = [STATE_1, STATE_2];\n\t\tthis._currentState = Math.floor(Math.random() * this._states.length);\n\t\tthis._color = 6;\n\t\tthis._x = 4;\n\t\tthis._y = -1 * this._states[this._currentState].length;\n\t}\n}\nexport default ZShape;\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/shapes/zShape.js\n **/","/**\n * Created by kurpav on 1/22/16.\n */\nconst BLOCKS_NUM = 8,\n\tSCORE_TPL = \"Score: {0}\";\n\nclass Stage {\n\tconstructor() {\n\t\tthis._stage = new createjs.Stage(document.getElementById(\"game-stage\"));\n\t\tthis._blockAssets = null;\n\t\tthis._blocks = [];\n\t\tthis._blocksContainer = new createjs.Container();\n\t\tthis._gameInfoContainer = new createjs.Container();\n\t\tthis._previewContainer = new createjs.Container();\n\t\tthis._scoreLabel = new createjs.Text(\"\", \"20px Arial\", \"white\");\n\t\tthis._gameOverScreen = new createjs.Container();\n\t\tthis._rows = 0;\n\t\tthis._cols = 0;\n\t\tthis._blockSize = 0;\n\t\tthis._bgImgPath = \"\";\n\t\tthis._blocksSpritePath = \"\";\n\t}\n\n\tinit(rows, cols, blockSize, blocksSpritePath, bgImgPath, callback) {\n\t\tthis._bgImgPath = bgImgPath;\n\t\tthis._blocksSpritePath = blocksSpritePath;\n\t\tthis._blockSize = blockSize;\n\t\tthis._rows = rows;\n\t\tthis._cols = cols;\n\n\t\tthis._loadSpritesheet(function () {\n\t\t\tthis._initBlocks();\n\t\t\tthis._drawBackground();\n\t\t\tthis._drawGameInfo();\n\t\t\tthis._stage.addChild(this._blocksContainer);\n\t\t\tthis._drawGameOverScreen();\n\t\t\tcallback();\n\t\t});\n\t}\n\n\t_initBlocks() {\n\t\tvar blockBtmp = null;\n\t\tfor (var i = 0; i < BLOCKS_NUM; i++) {\n\t\t\tblockBtmp = new createjs.Bitmap(createjs.SpriteSheetUtils.extractFrame(this._blockAssets, i));\n\t\t\tthis._blocks.push(blockBtmp);\n\t\t}\n\t}\n\n\t_loadSpritesheet(callback) {\n\t\tthis._blockAssets = new createjs.SpriteSheet({\n\t\t\timages: [this._blocksSpritePath],\n\t\t\tframes: {\n\t\t\t\twidth: this._blockSize,\n\t\t\t\theight: this._blockSize,\n\t\t\t\tcount: BLOCKS_NUM,\n\t\t\t\tregX: 0,\n\t\t\t\tregY: 0,\n\t\t\t\tspacing: 0,\n\t\t\t\tmargin: 0\n\t\t\t}\n\t\t});\n\n\t\tthis._blockAssets.addEventListener(\"error\", function (e) {\n\t\t\tconsole.error(\"Blocks spritesheet isn't found in \" + e.src);\n\t\t});\n\n\t\tif (!this._blockAssets.complete) {\n\t\t\t// not preloaded, listen for the complete event:\n\t\t\tthis._blockAssets.addEventListener(\"complete\", callback.bind(this));\n\t\t}\n\t}\n\n\t_drawGameInfo() {\n\t\tthis._gameInfoContainer.setBounds(0, 0, 180, 640);\n\t\tthis._gameInfoContainer.x = 320;\n\t\tthis._stage.addChild(this._gameInfoContainer);\n\n\t\tlet bkg = new createjs.Shape();\n\t\tbkg.setBounds(0, 0, 180, 640);\n\t\tbkg.graphics.setStrokeStyle(1).beginStroke(\"#ffffff\").moveTo(1, 0).lineTo(1, 640);\n\t\tthis._gameInfoContainer.addChild(bkg);\n\n\t\tlet previewContainerLabel = new createjs.Text(\"Next shape:\", \"20px Arial\", \"white\");\n\t\tpreviewContainerLabel.set({x: 25, y: 65});\n\t\tthis._gameInfoContainer.addChild(previewContainerLabel);\n\n\t\tthis._scoreLabel.text = \"Score: 0\";\n\t\tthis._scoreLabel.set({x: 25, y: 30});\n\t\tthis._gameInfoContainer.addChild(this._scoreLabel);\n\n\t\tthis._previewContainer.set({x: 25, y: 115});\n\t\tthis._gameInfoContainer.addChild(this._previewContainer);\n\t}\n\n\t_drawBackground() {\n\t\tlet bkg = null,\n\t\t\tbackdrop = new createjs.Shape();\n\n\t\tbackdrop.setBounds(0, 0, this._stage.canvas.width, this._stage.canvas.height);\n\t\tbackdrop.graphics.beginFill(\"0x000000\")\n\t\t\t.drawRect(0, 0, this._stage.canvas.width, this._stage.canvas.height);\n\n\t\tif (this._bgImgPath !== \"\") {\n\t\t\tbkg = new createjs.Bitmap(this._bgImgPath);\n\t\t} else {\n\t\t\tbkg = new createjs.Container();\n\n\t\t\tlet emptyBlock = this._blocks[0].clone(),\n\t\t\t\tcurrentBlock = null,\n\t\t\t\tcurX = 0,\n\t\t\t\tcurY = 0;\n\n\t\t\tfor (let i = 0; i < this._rows; i++) {\n\t\t\t\tfor (let j = 0; j < this._cols; j++) {\n\t\t\t\t\tcurrentBlock = emptyBlock.clone();\n\t\t\t\t\tcurrentBlock.x = curX;\n\t\t\t\t\tcurrentBlock.y = curY;\n\t\t\t\t\tbkg.addChild(currentBlock);\n\n\t\t\t\t\tcurX += this._blockSize;\n\t\t\t\t}\n\t\t\t\tcurX = 0;\n\t\t\t\tcurY += this._blockSize;\n\t\t\t}\n\t\t}\n\n\t\tthis._stage.addChildAt(backdrop, 0);\n\t\tthis._stage.addChild(bkg);\n\t\tthis._stage.update();\n\t}\n\n\t_drawGameOverScreen() {\n\t\tlet w = this._stage.canvas.width,\n\t\t\th = this._stage.canvas.height;\n\n\t\tthis._gameOverScreen.setBounds(0, 0, w, h);\n\n\t\tlet backdrop = new createjs.Shape();\n\t\tbackdrop.setBounds(0, 0, w, h);\n\t\tbackdrop.graphics.beginFill(\"0x000000\").drawRect(0, 0, w, h);\n\t\tbackdrop.alpha = 0.5;\n\n\t\tthis._gameOverScreen.addChild(backdrop);\n\n\t\tlet label = new createjs.Text(\"GAME OVER\", \"48px Arial\", \"white\"),\n\t\t\t{ width: textWidth, height: textHeight} = label.getBounds();\n\n\t\tlabel.set({x: w / 2 - textWidth / 2, y: h / 2 - textHeight / 2});\n\n\t\tthis._gameOverScreen.addChild(label);\n\t\tthis._gameOverScreen.visible = false;\n\t\tthis._stage.addChild(this._gameOverScreen);\n\t}\n\n\tshowGameOver() {\n\t\tthis._gameOverScreen.visible = true;\n\t}\n\n\thideGameOver() {\n\t\tthis._gameOverScreen.visible = false;\n\t}\n\n\tdrawShape(shape) {\n\t\tlet row = null,\n\t\t\tcell = null,\n\t\t\tblock = null,\n\t\t\tdrawX = shape.x,\n\t\t\tdrawY = shape.y;\n\n\t\tfor (let i = 0, len = shape.state.length; i < len; i++) {\n\t\t\trow = shape.state[i];\n\t\t\tfor (let j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\tcell = row[j];\n\t\t\t\tif (cell !== 0 && drawY >= 0) {\n\t\t\t\t\tblock = this._blocks[shape.color].clone();\n\t\t\t\t\tblock.x = drawX * this._blockSize;\n\t\t\t\t\tblock.y = drawY * this._blockSize;\n\t\t\t\t\tthis._blocksContainer.addChild(block);\n\t\t\t\t}\n\t\t\t\tdrawX += 1;\n\t\t\t}\n\t\t\tdrawX = shape.x;\n\t\t\tdrawY += 1;\n\t\t}\n\t}\n\n\tdrawGameBoard(gameData) {\n\t\tlet row = null,\n\t\t\tcell = null,\n\t\t\tblock = null;\n\n\t\tthis._blocksContainer.removeAllChildren();\n\n\t\tfor (let i = 0, len = gameData.length; i < len; i++) {\n\t\t\trow = gameData[i];\n\t\t\tfor (let j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\tcell = row[j];\n\t\t\t\tif (cell !== 0) {\n\t\t\t\t\tblock = this._blocks[cell].clone();\n\t\t\t\t\tblock.x = j * this._blockSize;\n\t\t\t\t\tblock.y = i * this._blockSize;\n\t\t\t\t\tthis._blocksContainer.addChild(block);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdrawShapePreview(shape) {\n\t\tlet row = null,\n\t\t\tcell = null,\n\t\t\tblock = null,\n\t\t\tdrawX = 0,\n\t\t\tdrawY = 0;\n\n\t\tthis._previewContainer.removeAllChildren();\n\n\t\tfor (let i = 0, len = shape.state.length; i < len; i++) {\n\t\t\trow = shape.state[i];\n\t\t\tfor (let j = 0, len2 = row.length; j < len2; j++) {\n\t\t\t\tcell = row[j];\n\t\t\t\tif (cell !== 0 && drawY >= 0) {\n\t\t\t\t\tblock = this._blocks[shape.color].clone();\n\t\t\t\t\tblock.x = drawX * this._blockSize;\n\t\t\t\t\tblock.y = drawY * this._blockSize;\n\t\t\t\t\tthis._previewContainer.addChild(block);\n\t\t\t\t}\n\t\t\t\tdrawX += 1;\n\t\t\t}\n\t\t\tdrawX = 0;\n\t\t\tdrawY += 1;\n\t\t}\n\n\t\tlet { width: giWidth } = this._gameInfoContainer.getBounds(),\n\t\t\t{ width: pWidth } = this._previewContainer.getBounds();\n\t\tthis._previewContainer.x = giWidth / 2 - pWidth / 2;\n\t}\n\n\tupdate() {\n\t\tthis._stage.update();\n\t}\n\n\tset score(score) {\n\t\tthis._scoreLabel.text = SCORE_TPL.replace(\"{0}\", score.toString());\n\t}\n}\n\nexport default Stage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/src/js/stage.js\n **/"],"sourceRoot":""}